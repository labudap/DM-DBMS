# Технические требования: Task Manager

## Содержание
1. [Управление пользователями и аутентификацией](#1-управление-пользователями-и-аутентификацией)
2. [Управление проектами и командами](#2-управление-проектами-и-командами)
3. [Управление задачами](#3-управление-задачами)
4. [Комментарии и теги](#4-комментарии-и-теги)
5. [Журналирование действий](#5-журналирование-действий)

## 1. Управление пользователями и аутентификацией

### 1.1. Регистрация пользователя
**Функциональные требования:**
- Система должна позволять новым пользователям регистрироваться с email, полным именем и паролем
- После регистрации пользователь должен быть автоматически аутентифицирован в системе

**Бизнес-правила:**
- Email должен быть уникальным в системе
- Пароль должен содержать минимум 8 символов, включая буквы и цифры
- Полное имя должно содержать от 2 до 100 символов
- При регистрации создается связанный профиль пользователя

**Ограничения:**
- Максимальная длина email: 255 символов
- Максимальная длина полного имени: 100 символов

### 1.2. Аутентификация пользователя
**Функциональные требования:**
- Система должна предоставлять возможность входа по email и паролю
- Сессия пользователя должна сохраняться определенное время

**Бизнес-правила:**
- Неудачные попытки входа должны логироваться
- После 5 неудачных попыток аккаунт временно блокируется на 15 минут

### 1.3. Управление профилем
**Функциональные требования:**
- Пользователь должен иметь возможность просматривать свой профиль
- Пользователь должен иметь возможность редактировать данные профиля
- Система должна поддерживать загрузку и отображение аватара

**Бизнес-правила:**
- Только авторизованный пользователь может редактировать свой профиль
- При изменении email требуется повторная верификация

**Ограничения:**
- Размер аватара: не более 5MB
- Поддерживаемые форматы: JPG, PNG, WEBP

## 2. Управление проектами и командами

### 2.1. Создание проекта
**Функциональные требования:**
- Авторизованный пользователь должен иметь возможность создать новый проект
- При создании проекта должны указываться название и описание

**Бизнес-правила:**
- Создатель проекта автоматически становится владельцем (Owner)
- Для проекта автоматически создаются стандартные статусы задач

### 2.2. Система ролей и прав

**Роли в проекте и их возможности:**

**Owner (Владелец) - полные права:**
- Создание, редактирование и удаление проекта
- Управление участниками (приглашение, удаление, изменение ролей)
- Назначение администраторов проекта
- Редактирование любых задач в проекте
- Просмотр всех данных проекта
- Передача прав владельца другому участнику

**Admin (Администратор) - расширенные права:**
- Редактирование настроек проекта (кроме удаления)
- Приглашение новых участников и управление их ролями (кроме назначения владельца)
- Создание и редактирование любых задач
- Управление тегами проекта
- Просмотр всей активности проекта

**Member (Участник) - базовые права:**
- Создание новых задач
- Редактирование собственных задач
- Редактирование назначенных задач
- Добавление комментариев к задачам
- Просмотр всех задач проекта
- Использование существующих тегов

**Viewer (Наблюдатель) - ограниченные права:**
- Просмотр задач и комментариев
- Поиск по задачам проекта
- Фильтрация и сортировка задач
- Просмотр истории изменений задач

### 2.3. Приглашение участников
**Функциональные требования:**
- Владелец и администраторы проекта должны иметь возможность приглашать участников
- Приглашение отправляется в виде уведомления в системе
- Приглашенный пользователь должен иметь возможность принять или отклонить приглашение
- Отправитель приглашения получает информацию об ответе на него

**Бизнес-правила:**
- Срок действия приглашения: 7 дней
- При повторном приглашении существующему участнику обновляется его роль
- Нельзя приглашать пользователей с несуществующими email

### 2.4. Выход из проекта
**Функциональные требования:**
- Участник проекта должен иметь возможность покинуть проект
- При выходе владельца проекта должна быть предусмотрена процедура передачи прав

**Бизнес-правила:**
- Обычный участник может покинуть проект в любой момент
- Владелец должен передать права другому участнику перед выходом
- Если владелец выходит и нет других участников - проект удаляется

## 3. Управление задачами

### 3.1. Создание задачи
**Функциональные требования:**
- Участники с соответствующими правами должны иметь возможность создавать задачи
- При создании задачи должны заполняться обязательные и опциональные поля

**Обязательные поля:**
- Название задачи
- Проект

**Опциональные поля:**
- Подробное описание
- Исполнитель
- Срок выполнения
- Приоритет
- Теги

### 3.2. Редактирование задачи
**Функциональные требования:**
- Авторизованные пользователи должны иметь возможность редактировать задачи
- Система должна отслеживать историю изменений

**Бизнес-правила:**
- Создатель задачи может редактировать свою задачу
- Исполнитель задачи может редактировать назначенную задачу
- Администраторы и владелец могут редактировать любые задачи

### 3.3. Атрибуты задачи

**Статусы задачи:**
- Новая
- В работе
- На проверке
- Выполнена
- Отложена
- Отменена

**Уровни приоритета:**
- Низкий
- Средний
- Высокий
- Критический

**Срок выполнения:**
- Формат даты: YYYY-MM-DD
- Не может быть установлена в прошлом при создании задачи
- Система уведомлений за 24 часа до дедлайна

## 4. Комментарии и теги

### 4.1. Система комментариев
**Функциональные требования:**
- Участники проекта должны иметь возможность оставлять комментарии к задачам
- Должна быть возможность редактирования и удаления комментариев

**Бизнес-правила:**
- Редактирование комментария возможно в течение 15 минут после создания
- Удалять комментарии могут авторы и администраторы проекта
- Поддержка вложенных комментариев (ответов)

**Ограничения:**
- Максимальная длина комментария: 5000 символов

### 4.2. Система тегов
**Функциональные требования:**
- Участники с правами редактирования должны иметь возможность создавать теги
- Теги должны быть привязаны к конкретному проекту
- Должна быть возможность назначать теги задачам

**Бизнес-правила:**
- Названия тегов должны быть уникальными в рамках проекта
- Цвет тега выбирается из предопределенной палитры

## 5. Журналирование действий

### 5.1. Фиксация изменений
**Функциональные требования:**
- Система должна автоматически записывать все значимые действия пользователей
- Должна быть возможность просмотра истории изменений для каждой задачи

**Типы отслеживаемых событий:**
- Создание задачи
- Изменение статуса задачи
- Назначение/смена исполнителя
- Изменение сроков выполнения
- Изменение приоритета
- Добавление/удаление тегов
- Добавление комментариев
- Добавление/удаление участников проекта

**Структура записи лога:**
- Тип действия
- Пользователь, совершивший действие
- Дата и время действия
- Старые и новые значения измененных полей
- Идентификатор сущности

### 5.2. Уведомления
**Функциональные требования:**
- Система должна уведомлять пользователей о событиях
- Уведомления должны быть доступны в интерфейсе системы

**Типы уведомлений:**
- Назначение на задачу
- Изменение статуса задачи
- Комментарии к задаче
- Приближение дедлайна
- Приглашение в проект
